<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:aui="http://liferay.com/faces/aui" xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich" xmlns:ui="http://java.sun.com/jsf/facelets" 
	template="/templates/template.xhtml">
	<ui:param name="top_selected_item" value="creditrequest" />
    <ui:define name="title">Business analysis console</ui:define>

    <ui:define name="pageContent">
		<h:form id="frmView" prependId="false">
			<rich:messages globalOnly="true" layout="table" />
			      
					<h:panelGrid columns="2" columnClasses="top-valigned, top-valigned">
						
						<rich:panel header="Заявка" styleClass="layout block1" >
							<h:panelGrid columns="2" columnClasses="layout-field-name, top-valigned">
								<h:outputText value="ID" /> <h:outputText value="#{editChReq.creditRequest.id}" /> 
								<h:outputText value="Номер" /> <h:outputText value="#{editChReq.creditRequest.uniqueNomer}" />
								<h:outputText value="Статус заявки" /> <h:outputText value="#{editChReq.creditRequest.status.name}" />
								<h:outputText value="Дата заполнения" /> <h:outputText value="#{editChReq.creditRequest.dateContest}"><f:convertDateTime pattern="dd.MM.yyyy" /></h:outputText>	
								<h:outputText value="Дата подписания оферты" /> <h:outputText value="#{editChReq.creditRequest.dateSign}"><f:convertDateTime pattern="dd.MM.yyyy" /></h:outputText>
								<h:outputText value="Ставка" /> 
								<h:outputText value="#{editChReq.creditRequest.stake}" >
								  <f:convertNumber type="percent" maxFractionDigits="1"/>
								</h:outputText>
								<h:outputText value="Сумма" /> <h:outputText value="#{editChReq.creditRequest.creditSum}" />
								<h:outputText value="Срок в днях" /> <h:outputText value="#{editChReq.creditRequest.creditDays}" />
								
							</h:panelGrid>			
						</rich:panel>
						
						<rich:panel header="Клиент" styleClass="layout block2">
							<h:panelGrid columns="2" columnClasses="layout-field-name, top-valigned" >								
								<h:outputText value="ФИО" /> <h:outputText value="#{editChReq.creditRequest.peopleMain.peoplePersonalActive.surname} #{editChReq.creditRequest.peopleMain.peoplePersonalActive.name} #{editChReq.creditRequest.peopleMain.peoplePersonalActive.midname}" />
								<h:outputText value="Документ" rendered="#{editChReq.creditRequest.peopleMain.activePassport!=null}"/> <h:outputText value="#{editChReq.creditRequest.peopleMain.activePassport.descriptionFull} " rendered="#{editChReq.creditRequest.peopleMain.activePassport!=null}"/>
								<h:outputText value="Адрес прописки" rendered="#{editChReq.creditRequest.peopleMain.registerAddress!=null}"/> <h:outputText value="#{editChReq.creditRequest.peopleMain.registerAddress.description} " rendered="#{editChReq.creditRequest.peopleMain.registerAddress!=null}"/>
								<h:outputText value="Адрес проживания" rendered="#{editChReq.creditRequest.peopleMain.registerAddress!=null}" /> 
								<h:panelGroup rendered="#{editChReq.creditRequest.peopleMain.registerAddress!=null}">
									<h:outputText value="#{editChReq.creditRequest.peopleMain.registerAddress.description}" rendered="#{editChReq.creditRequest.peopleMain.registerAddress.isSame}" />
									<h:outputText value="#{editChReq.creditRequest.peopleMain.residentAddress.description}" rendered="#{! editChReq.creditRequest.peopleMain.registerAddress.isSame}" />
								</h:panelGroup>
								<h:outputText value="Мобильный телефон" /><h:outputText value="#{editChReq.creditRequest.peopleMain.cellPhone.value}"/>
								<h:outputText value="Email" /><h:outputText value="#{editChReq.creditRequest.peopleMain.email.value}"/>
						
							</h:panelGrid>	
						</rich:panel>	
						
						</h:panelGrid>
						
						 <rich:panel header="Меняем данные" styleClass="layout" >
						   <h:panelGrid columns="2" columnClasses="layout-field-name, top-valigned" >
						     <h:outputText value="Что нужно поменять" /> 
						     <h:inputTextarea value="#{editChReq.changeRequest.description}" cols="80" rows="30"/>
						   </h:panelGrid>
						 </rich:panel>   
							
			<h:panelGrid columns="2">
			   <h:commandButton styleClass="button ml0" value="Отправить" action="#{editChReq.save}" onclick="#{rich:component('popupIndicator')}.show();return true;"></h:commandButton>
			   <h:commandButton styleClass="button grey" value="Закрыть" action="#{editChReq.close}"></h:commandButton>	
			</h:panelGrid>
			
        </h:form>
    </ui:define>
</ui:composition>
